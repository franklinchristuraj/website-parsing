jQuery(document).ready(function($){$("form._pit-ajax").submit(function(e){e.preventDefault();_pit_ajax(this);});function _pit_ajax(form){var formdata=new FormData(form);var this_form=$(form);this_form.find('.alert').remove();this_form.find('.error').remove();this_form.find('.has-success').removeClass('has-success');this_form.find('.has-error').removeClass('has-error');$.ajax({url:ajaxurl,type:'POST',data:formdata,cache:false,dataType:'json',processData:false,contentType:false,ajaxStart:this_form.append('<div class="ajax-loader w-full h-full svg" style="position: fixed; top: 50%; left: 50%;"><img src="../img/ajax-loader.svg" style="width: 50px;" alt=""></div>'),ajaxComplete:$('.ajax-loader').remove(),success:function(response){if(!response.success){$('html, body').animate({scrollTop:(this_form.offset().top-100)},800);if(!response.data)
return this_form.prepend('<div class="alert alert-warning" style="margin: 20px 0;">Le serveur est peut-être indisponible ou le fichier que vous avez envoyé dépasse la limite du serveur.</div>');if($.type(response.data)==="string")
return this_form.prepend('<div class="alert alert-warning" style="margin: 20px 0;">'+response.data+'</div>');$.each(response.data,function(key,value){var parent_field=this_form.find('#'+key).parent();parent_field.addClass('has-error');parent_field.append('<span class="error">'+value+'</span>');});return;}
this_form.prepend('<div class="alert alert-success" style="margin: 20px 0;">'+response.data+'</div>');},error:function(XMLHttpRequest,textStatus,errorThrown){this_form.prepend('<div class="alert alert-danger" style="margin: 20px 0;">Une erreur s\'est produite.</div>');console.log("XMLHttpRequest: "+XMLHttpRequest);console.log("Status: "+textStatus);console.log("Erreur: "+errorThrown);}});}});